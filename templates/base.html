<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>El misteri del Tastet - Escape</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
      :root { --bg:#0b1020; --card:#121a35; --muted:#9fb0d9; --text:#ebefff; --accent:#7ca7ff; --ok:#30c77e; --warn:#ffd166; --bad:#ff5b6b; }
      * { box-sizing: border-box; }
      body { margin:0; font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif; background: radial-gradient(60% 80% at 10% 10%, #0f1730, #0b1020); color: var(--text); }
      .container { max-width: 820px; margin: 0 auto; padding: 24px; }
      header { display:flex; align-items:center; justify-content:space-between; gap:12px; margin-bottom: 20px; }
      .brand { font-weight:800; letter-spacing:0.5px; }
      .card { background: linear-gradient(180deg, rgba(255,255,255,0.03), rgba(255,255,255,0.00)); border: 1px solid rgba(255,255,255,0.08); padding: 24px; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,0.35); }
      .muted { color: var(--muted); }
      .levels { display:flex; gap:8px; flex-wrap:wrap; margin: 8px 0 16px; }
      .pill { padding: 6px 10px; border-radius: 999px; border: 1px solid rgba(255,255,255,0.08); font-size: 12px; }
      .pill.ok { background: rgba(48,199,126,0.12); border-color: rgba(48,199,126,0.35); }
      .pill.current { background: rgba(124,167,255,0.12); border-color: rgba(124,167,255,0.35); }
      form { display:grid; gap:12px; margin-top: 12px; }
      input[type=text] { width:100%; padding:12px 14px; border-radius: 12px; border: 1px solid rgba(255,255,255,0.14); background: rgba(255,255,255,0.04); color: var(--text); outline: none; }
      button { padding: 10px 14px; border-radius: 12px; background: var(--accent); color:#081023; font-weight:700; border:none; cursor:pointer; }
      .flash { padding: 10px 12px; border-radius: 12px; margin: 6px 0; font-size: 14px; }
      .flash.success { background: rgba(48,199,126,0.15); border: 1px solid rgba(48,199,126,0.35);}
      .flash.warning { background: rgba(255,209,102,0.15); border: 1px solid rgba(255,209,102,0.35);}
      .flash.danger { background: rgba(255,91,107,0.15); border: 1px solid rgba(255,91,107,0.35);}
      .row { display:flex; gap:18px; flex-wrap:wrap; }
      .grow { flex: 1 1 340px; }
      a { color: var(--accent); text-decoration: none; }
      footer { margin-top: 28px; font-size: 12px; color: var(--muted); }
    </style>
  </head>
  <body>
    <div class="container">
      <header>
        <div class="brand">El misteri del tastet - Escape</div>
        <nav>
          <a href="/">Inici</a>
          <span class="muted">·</span>
          <a href="/reset">Reset</a>
        </nav>
      </header>

      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          <div class="stack">
          {% for category, message in messages %}
            <div class="flash {{ category }}">{{ message }}</div>
          {% endfor %}
          </div>
        {% endif %}
      {% endwith %}

      <main>
        {% block content %}{% endblock %}
      </main>

      <footer>
        El progrés es guarda en cada sessió del navegador.
      </footer>
    </div>
  </body>
</html>